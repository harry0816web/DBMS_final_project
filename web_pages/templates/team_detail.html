<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Details</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/team_detail.css') }}">
</head>
<body>
    <header>
        <div class="left-section">
            <a href="/main_page">Home</a>
        </div>
        <div class="right-section">
            <a href="/login">Login</a>
            <a href="/register">Register</a>
        </div>
    </header>
    <main>
        <h1>{{ team_name }}</h1>

        <!-- 搜尋 & 選單-->
        <form method="POST" action="/teams/{{team_abb}}">
            <div class="team-dropdown">
                <select name="opponent" onchange="this.form.submit()">
                    <option value="allteam" {% if 'allteam' == selected_opponent %}selected{% endif %}>All Teams</option>
                    {% for team in teams %}
                        {% if team['Team'] != team_name %}
                            <option value="{{ team['Abbreviation'] }}" {% if team['Abbreviation'] == selected_opponent %}selected{% endif %}>{{ team['Abbreviation'] }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </div>
            <div class="season-dropdown">
                <select name="season" onchange="this.form.submit()">
                    <option value="alltime" {% if 'alltime' == selected_season %}selected{% endif %}>All Season</option>
                    {% for i in range (18, 25) %}
                        <option value="{{ i }}" {% if i|string == selected_season %}selected{% endif %}>20{{ i }}-{{ i+1 }}</option>
                    {% endfor %}
                </select>
            </div>
        </form>

        {% if message %}
            <p>{{ message }}</p>
        {% else %}
            <table border="1">
                <thead>
                    <tr>
                        <th>Games Played</th>
                        <th>Wins</th>
                        <th>Losses</th>
                        <th>Avg Points</th>
                        <th>Avg Rebounds</th>
                        <th>Avg Assists</th>
                        <th>Avg Steals</th>
                        <th>Avg Blocks</th>
                        <th>Win %</th>
                    </tr>
                </thead>
                <tbody>              
                    <tr>
                        <td>{{ team_data['games_played'] }}</td>
                        <td>{{ team_data['wins'] }}</td>
                        <td>{{ team_data['losses'] }}</td>
                        <td>{{ team_data['point'] }}</td>
                        <td>{{ team_data['rebound'] }}</td>
                        <td>{{ team_data['assist'] }}</td>
                        <td>{{ team_data['steal'] }}</td>
                        <td>{{ team_data['block'] }}</td>
                        <td>{{ team_data['avg_win'] }}%</td>
                    </tr>
                </tbody>
            </table>
        {% endif %}
    </main>
    
    <!-- 顯示所有球員 -->
    {% if players %}
        <div id="results">
            <table>
                <thead>
                    <tr>
                        <th>Player</th>
                        <th>Team</th>
                        <th>Number</th>
                        <th>Position</th>
                        <th>Height</th>
                        <th>Weight</th>
                    </tr>
                </thead>
                <tbody>
                    {% for player in players %}
                        <tr>
                            <td><a href="/player/{{ player.PERSON_ID }}">{{ player.DISPLAY_FIRST_LAST }}</a></td>
                            <td>{{ player.TEAM_NAME }}</td>
                            <td>{{ player.JERSEY }}</td>
                            <td>{{ player.POSITION }}</td>
                            <td>{{ player.HEIGHT }}</td>
                            <td>{{ player.WEIGHT }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p>No players found.</p>
    {% endif %}
</body>
</html>
